<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" xml:space="preserve">
    <head>
        <link href="../Resources/Stylesheets/styles.css" rel="stylesheet" />
    </head>
    <body>
        <h1 MadCap:autonum=""><a name="hss_appendix_4278766472_1035323"></a><a name="hss_appendix_4278766472_82432"></a>Scenario 4 - Restore of a Damaged Replica (locally)</h1>
        <p>The diagram (<MadCap:xref href="#hss_scenario4" class="figure_x">see Figure</MadCap:xref>) illustrates <MadCap:variable name="General.ProductNameHSS" /> when restoring a damaged replica.</p>
        <div class="figure">
            <img src="../Resources/Images/Images_Topics_HSS/HSS_restore_damaged_replica_locally.png" style="margin-left: 73, 23264px;margin-top: 4, 83912px;margin-bottom: 2, 454475px;width: 508px;height: 104px;" MadCap:mediastyle="@media print { width: 400px;height: auto; }" />
            <p class="Figure" MadCap:autonum="&lt;b&gt;Figure&lt;b&gt;: &lt;/b&gt;&lt;/b&gt;"><a name="hss_scenario4"></a>Scenario 4</p>
        </div>
        <h2 MadCap:autonum="">Prerequisites</h2>
        <p class="Bulleted" MadCap:autonum="• ">Do not run any <MadCap:variable name="HSS.tn" /> backups during the restore</p>
        <h2 MadCap:autonum="">Hypothesis</h2>
        <p class="Bulleted" MadCap:autonum="• ">HyperStream_B replicated to HyperStream_A. </p>
        <p class="Bulleted" MadCap:autonum="• ">Replication can be comprised of several <MadCap:variable name="HSS.hys_exe" /> s and HyperStream _A can receive streams from another source (part of the replica ring), we must not assume that HyperStream_A=HyperStream_B.</p>
        <h2 MadCap:autonum="">Procedure</h2>
        <p class="s1_StepNum" MadCap:autonum="1. ">If HyperStream_B is still running, stop HyperStream_B</p>
        <p class="s1_StepNum" MadCap:autonum="2. "><a name="hss_appendix_4278766472_1049850"></a><a name="hss_appendix_4278766472_90201"></a>Recreate HyperStream_B:</p>
        <p class="BulletedCont"><span class="Monospace">&gt;ade_server --reset --force</span>. This command totally removes all data.</p>
        <p class="s1_StepNum" MadCap:autonum="3. ">If step 2  fails, for instance if the database cannot be recovered, <span class="_Override">launch this command:</span></p>
        <p class="BulletedCont"><span class="Monospace">&gt;ade_server --recover &lt;</span><span class="Monoitalic">config_backup_path</span><span class="Monospace">&gt; --force</span>
        </p>
        <p class="s1_StepNum" MadCap:autonum="4. ">Start HyperStream_B.</p>
        <p class="Description">At this point, HyperStream_B will be empty but will be populated by the replication resync operation. Streams will start to return from HyperStream_A. The logs will show this activity. Please note this procedure may take some time (especially if A and B are using a WAN connection).</p>
    </body>
</html>